{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-24149", "model_patch": "diff --git a/lib/matplotlib/axes/_axes.py b/lib/matplotlib/axes/_axes.py\nindex fdac0f3560..6e9dd67ec1 100644\n--- a/lib/matplotlib/axes/_axes.py\n+++ b/lib/matplotlib/axes/_axes.py\n@@ -2180,12 +2180,12 @@ class Axes(_AxesBase):\n             # wrap numpy arrays.\n             try:\n                 x0 = cbook._safe_first_finite(x0)\n-            except (TypeError, IndexError, KeyError):\n+            except (TypeError, IndexError, KeyError, StopIteration):\n                 pass\n \n             try:\n                 x = cbook._safe_first_finite(xconv)\n-            except (TypeError, IndexError, KeyError):\n+            except (TypeError, IndexError, KeyError, StopIteration):\n                 x = xconv\n \n             delist = False\n@@ -2829,11 +2829,17 @@ class Axes(_AxesBase):\n         \"\"\"\n         # process the unit information\n         if len(xranges):\n-            xdata = cbook._safe_first_finite(xranges)\n+            try:\n+                xdata = cbook._safe_first_finite(xranges)\n+            except (TypeError, IndexError, KeyError, StopIteration):\n+                xdata = None\n         else:\n             xdata = None\n         if len(yrange):\n-            ydata = cbook._safe_first_finite(yrange)\n+            try:\n+                ydata = cbook._safe_first_finite(yrange)\n+            except (TypeError, IndexError, KeyError, StopIteration):\n+                ydata = None\n         else:\n             ydata = None\n         self._process_unit_info(\n@@ -3466,6 +3472,11 @@ class Axes(_AxesBase):\n             Otherwise, fallback to casting to an object array.\n             \"\"\"\n \n+            try:\n+                first_finite = cbook._safe_first_finite(err)\n+            except (TypeError, IndexError, KeyError, StopIteration):\n+                first_finite = None\n+            \n             if (\n                     # make sure it is not a scalar\n                     np.iterable(err) and\n@@ -3475,10 +3486,11 @@ class Axes(_AxesBase):\n                     # safe_first_element because getitem is index-first not\n                     # location first on pandas objects so err[0] almost always\n                     # fails.\n-                    isinstance(cbook._safe_first_finite(err), np.ndarray)\n+                    first_finite is not None and\n+                    isinstance(first_finite, np.ndarray)\n             ):\n                 # Get the type of the first element\n-                atype = type(cbook._safe_first_finite(err))\n+                atype = type(first_finite)\n                 # Promote the outer container to match the inner container\n                 if atype is np.ndarray:\n                     # Converts using np.asarray, because data cannot\n@@ -4356,10 +4368,16 @@ class Axes(_AxesBase):\n             c = (facecolors if facecolors is not None\n                  else \"b\" if mpl.rcParams['_internal.classic_mode']\n                  else get_next_color_func())\n+        try:\n+            first_finite_c = cbook._safe_first_finite(c)\n+        except (TypeError, IndexError, KeyError, StopIteration):\n+            first_finite_c = None\n+        \n         c_is_string_or_strings = (\n             isinstance(c, str)\n             or (np.iterable(c) and len(c) > 0\n-                and isinstance(cbook._safe_first_finite(c), str)))\n+                and first_finite_c is not None\n+                and isinstance(first_finite_c, str)))\n \n         def invalid_shape_exception(csize, xsize):\n             return ValueError(\n"}